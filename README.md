# Задание 1 - Проект Mesto

Mesto — это фото-блог (пользователи постят фотографии, ставят лайки, оставляют комментарии).
Фронтенд реализован на ReactJS, бэкенд — на Node.js/Express.

> Из задания урока предполагается, что проект уже большой или будет расти, поэтому нужно уходить от монолита.
> Ниже будут рассуждения и описания для тестового задания.
> В реальном проекте это было бы где-то в Confluenсe, не в README.md

## Этап 1. Проектирование

### Выбор фреймворка:

- Выбираем между Single-SPA, WMF, Web Components — среди самых распространённых решений.
  Здесь не хочется экспериментировать, так как это основной каркас.
- В первую очередь буду ориентироваться на опыт команды: если с каким-то решением уже работали успешно в продакшене, то
  выбор будет в его пользу.
- Конкретно для проекта Mesto (подобие Instagram) больше подходит шаринг компонентов через Webpack Module Federation,
  нежели деление на полностью независимые части через Single-SPA. Это связано с тем, что проект по UX достаточно
  монолитен (всё вращается вокруг фото/ленты).
- Но если команда хочет мигрировать, например, на VueJs, то выберем Single-SPA,

### Общие моменты:

- Тестовое задание выполнено в одном репозитории, но в реальном проекте каждый модуль будет находиться в своём
  репозитории (как микросервисы бэкенда, так и микро-фронтенды). Это позволит вести разработку и деплой полностью
  независимо.
- В приложении предполоагается использование общего состояния (выбор на усмотрение команды: Redux, MobX).
- Независимо от фреймворка, будем стараться писать код так, чтобы в конечных компонентах и сервисах не прослеживалось
  использование какой-либо общей библиотеки. То есть использовать обёртки и фасады, чтобы основной код можно было при
  необходимости мигрировать без глобального рефакторинга.

## Этап 2. Планирование изменений

Для разбивки используем паттерн DDD. Но на ранней стадии не пытаемся дробить без меры

### Предварительное деление:

- **Application**
    - Host-модуль/каркас приложения
    - Возможно, сюда же ляжет layout (header/footer).
    - В идеале, от этого модуля не должен зависеть ни один другой.
- **Shared/Common**
    - Дизайн-система (цвета, шрифты, общие иконки).
    - библиотека общих компонентов (кнопки, формы)
    - Общие утилиты.
- **Feed**
    - Из описания пока неясно, как проект будет развиваться (речь идёт то ли о фото, то ли о местах).
      Логично предположить, что со временем появятся видео, а не только фото.   
      Поэтому я бы не делил на раннем этапе контентную часть.
      Всю работу с фото, лентой, лайками и комментариями положил бы в один модуль.
      Позже, при необходимости, можно будет его разделить.
- **Users**
    - Сюда относится всё, что касается работы с пользователями (но не их контентом).
    - Авторизация/регистрация.
    - Отображение профиля(своего и чужого), редактирование своего.
    - Настройки аккаунта пользователя.
    - Выделение авторизации в отдельный модуль кажется излишним.

### Структура папок:

Как уже упоминалось выше, каждый модуль должен находиться в своём репозитории. 
Нейминг репозиториев/подов/доменов зависит от договорённостей в компании. 
У нас это могло бы выглядеть так:

Микрофронтенды:

``` 
http://app.ui.mesto.dev.k8s
http://feed.ui.mesto.dev.k8s
http://shared.ui.mesto.dev.k8s
...
```

Бакенды:

```
API gateway:
http://api.mesto.dev.k8s

Бакенды микросервисов:
http://feed.api.mesto.dev.k8s
http://media.api.mesto.dev.k8s
http://users.api.mesto.dev.k8s
...
```

В репозитории микрофронтенда можно использовать стандартную структуру папок:

```
src/
├── assets/       
│   ├── images/
│   ├── styles/
│   └── fonts/
├── components/    
├── pages/           
├── services/       
├── store/        
```

## Этап 3. Реализация/сборка

К сожалению нет времени поиграться с этим. ¯\(ツ)/¯
Само по себе Hello World мало что даст в плане пользы.
Надо разворачивать полноценный стенд с CI/CD и пробовать на реально проекте .


# Задание 2 - Схема разбивки на микросервисы

Публичная ссылка на диаграмму:
https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=YandexPracticum_Sprint_1_Stanislav_B.drawio#Uhttps%3A%2F%2Fdrive.google.com%2Fuc%3Fid%3D1_xL0g-JhMIUyNYpZrkS2rsV5MoT_yTV9%26export%3Ddownload

Публичная ссылка на файл drawio в Google Drive:
https://drive.google.com/file/d/1_xL0g-JhMIUyNYpZrkS2rsV5MoT_yTV9/view?usp=drive_link
